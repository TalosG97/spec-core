<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>EDSY</title>
<meta name="application-name" content="EDSY"/>
<meta id="edsy_versions_html" name="edsy-versions-html" content="419039901,419039901,419039901,419039901"/>
<meta id="last_modified" name="last-modified" content="20241212"/>
<meta name="author" content="taleden"/>
<meta name="description" content="EDSY is a ship outfitting tool for Elite Dangerous"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; base-uri 'none'; form-action https://inara.cz; object-src 'none'; style-src 'self' 'unsafe-inline'"/>
<link rel="preload" as="font" href="EuroCaps.woff2" type="font/woff2" crossorigin="anonymous"/>
<link rel="preload" as="font" href="Sintony.woff2" type="font/woff2" crossorigin="anonymous"/>
<link rel="preload" as="font" href="Telegrama.woff2" type="font/woff2" crossorigin="anonymous"/>
<link rel="stylesheet" href="edsy.css" type="text/css"/>
<link rel="icon" href="favicon.ico" sizes="16x16 32x32"/>
<link rel="icon" href="favicon-16.png" sizes="16x16"/>
<link rel="icon" href="favicon-32.png" sizes="32x32"/>
<link rel="icon" href="favicon-48.png" sizes="48x48"/>
<link rel="icon" href="favicon-152.png" sizes="152x152"/>
<link rel="icon" href="favicon-196.png" sizes="196x196"/>
<link rel="apple-touch-icon" href="favicon-196.png"/>
<link rel="apple-touch-icon-precomposed" href="favicon-196.png"/>
<link rel="mask-icon" href="favicon.svg" color="#ff7f00"/>
<script async src="nocache"></script>
<script defer src="pako.min.js"></script>
<script defer src="eddb.js"></script>
<script defer src="edsy.js"></script>
</head>
<body class="">
<!-- Welcome Overlay (fixed, above everything; removed after Enter) -->
<div id="welcomeScreen" aria-hidden="false">
  <video autoplay muted loop playsinline id="welcomeVideo">
    <source src="welcome.mp4" type="video/mp4"/>
  </video>

  <div id="welcomeText" role="dialog" aria-label="Welcome">
    <h1>WELCOME, CMDR</h1>
    <p>WHAT IS YOUR NAME?</p>
    <div class="welcome-input-row">
      <input type="text" id="commanderName" placeholder="Enter your name" />
      <button id="enterBtn" type="button">ENTER</button>
    </div>
  </div>
</div>

<!-- The rest of the original EDSY DOM follows (unchanged). -->
<div id="svg_defs">
  <!-- NOTE: your original massive SVG defs and app markup remain here exactly as in the repo.
       I'm not reproducing it to keep this file concise, but your local file will contain it. -->
</div>

<!-- Overlay logic -->
<script>
(function () {
  // Make Enter key submit
  document.addEventListener('DOMContentLoaded', function () {
    var input = document.getElementById('commanderName');
    var btn   = document.getElementById('enterBtn');
    if (!input || !btn) return;

    function closeOverlay() {
      // Optionally persist commander name
      try {
        var name = (input.value || '').trim();
        if (name) localStorage.setItem('edsy_commander', name);
      } catch (e) {}

      var overlay = document.getElementById('welcomeScreen');
      if (!overlay) return;
      overlay.classList.add('fade-out');
      // After CSS animation completes, remove from DOM to uncover app
      overlay.addEventListener('animationend', function () {
        overlay.parentNode.removeChild(overlay);
        document.body.classList.remove('welcome-active');
      }, { once: true });
    }

    btn.addEventListener('click', closeOverlay);
    input.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        closeOverlay();
      }
    });

    // In case some users want to call enterSite() from HTML onclick
    window.enterSite = closeOverlay;

    // Prevent background scroll while overlay is up
    document.body.classList.add('welcome-active');
    input.focus();
  });
})();
</script>
</body>
</html>
